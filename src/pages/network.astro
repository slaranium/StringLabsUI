---
// src/pages/network.astro
import MainLayout from '../layouts/MainLayout.astro';
// --- IMPORT DATA DARI FILE TERPISAH ---
import { networks } from '../data/networks'; 
---

<MainLayout title="Networks - StringLabs">
    
    <section class="relative pt-32 pb-40 min-h-screen">
        
        <div class="max-w-7xl mx-auto px-6">
            
            <div class="mb-16 text-center max-w-3xl mx-auto">
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-6">
                    Supported <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-primary to-brand-secondary">Networks</span>
                </h1>
                <p class="text-brand-text-muted text-lg md:text-xl leading-relaxed">
                    Choose a network to view explorer details or to stake directly.
                </p>
            </div>
            
            {/* Filter Buttons */}
            <div class="flex justify-center mb-16">
                <div class="bg-[#1a1a2e] p-1 rounded-full inline-flex border border-white/5">
                    <button class="filter-btn active px-6 py-2 rounded-full text-sm font-medium transition-all text-white bg-brand-primary" data-filter="all">
                        All
                    </button>
                    <button class="filter-btn px-6 py-2 rounded-full text-sm font-medium transition-all text-gray-400 hover:text-white" data-filter="MAINNET">
                        Mainnet
                    </button>
                    <button class="filter-btn px-6 py-2 rounded-full text-sm font-medium transition-all text-gray-400 hover:text-white" data-filter="TESTNET">
                        Testnet
                    </button>
                    <button class="filter-btn px-6 py-2 rounded-full text-sm font-medium transition-all text-gray-400 hover:text-white" data-filter="ARCHIVE">
                        Archive
                    </button>
                </div>
            </div>

            {/* Grid Container */}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="network-grid">
                
                {networks.map((net) => (
                    <div class="network-card relative bg-[#0F0F1A] border border-white/5 rounded-3xl p-8 flex flex-col items-center text-center hover:border-brand-primary/30 transition-all duration-300 group" data-type={net.type}>
                        
                        {/* 1. LAYER BAWAH (z-0): Link Full Card (Internal) */}
                        <a href={`/network/${net.id}`} class="absolute inset-0 z-0 rounded-3xl" aria-label={`View details for ${net.name}`}></a>

                        {/* 2. LAYER TENGAH (z-10): Konten Visual (Icon & Teks) */}
                        <div class="relative z-10 pointer-events-none flex flex-col items-center w-full">
                            <div class="w-16 h-16 rounded-full bg-[#1a1a2e] flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 border border-white/5 overflow-hidden">
                                <img 
                                    src={net.icon} 
                                    alt={net.name} 
                                    class="w-full h-full object-cover"
                                    onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
                                />
                                <span class="hidden text-xl font-bold text-white absolute">{net.name.charAt(0)}</span>
                            </div>

                            <h3 class="text-xl font-bold text-white mb-2">{net.name}</h3>
                            <p class="text-[10px] tracking-[0.2em] font-bold text-brand-text-muted uppercase mb-8">
                                {net.type}
                            </p>
                        </div>

                        {/* 3. LAYER ATAS (z-20): Tombol Action */}
                        <div class="grid grid-cols-2 gap-4 w-full mt-auto relative z-20">
                            
                            <a 
                                href={net.explorer} 
                                target={net.explorer === '#' ? '_self' : '_blank'} 
                                rel="noopener noreferrer"
                                class="px-4 py-3 rounded-xl bg-white text-black font-bold text-sm hover:bg-gray-200 transition-colors shadow-lg shadow-white/5 flex items-center justify-center"
                            >
                                Explorer
                            </a>

                            <a 
                                href={net.stake} 
                                target={net.stake === '#' ? '_self' : '_blank'} 
                                rel="noopener noreferrer"
                                class="px-4 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-bold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-blue-500/20 flex items-center justify-center"
                            >
                                Stake
                            </a>

                        </div>

                    </div>
                ))}

            </div>

        </div>
    </section>

    {/* Logic Filter JS */}
    <script>
        const filterBtns = document.querySelectorAll('.filter-btn');
        const cards = document.querySelectorAll('.network-card');

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Reset active class
                filterBtns.forEach(b => {
                    b.classList.remove('bg-brand-primary', 'text-white');
                    b.classList.add('text-gray-400');
                });
                
                // Set active class
                btn.classList.remove('text-gray-400');
                btn.classList.add('bg-brand-primary', 'text-white');

                const filterValue = btn.getAttribute('data-filter');

                // Filter Cards
                cards.forEach(card => {
                    if (card instanceof HTMLElement) {
                        const cardType = card.getAttribute('data-type');
                        
                        if (filterValue === 'all' || filterValue === cardType) {
                            card.style.display = 'flex';
                            card.style.opacity = '0';
                            setTimeout(() => card.style.opacity = '1', 50);
                        } else {
                            card.style.display = 'none';
                        }
                    }
                });
            });
        });
    </script>

</MainLayout>